<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pit Scouting</title>
  <link rel="stylesheet" href="styles.css">

  <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
  
  <script>
    function generateQRCode(event) {
      event.preventDefault(); 

      const checkboxes = document.querySelectorAll('input[type="checkbox"]');
      const anyChecked = Array.from(checkboxes).some(checkbox => checkbox.checked);

      if (!anyChecked) {
        alert('Please select at least one checkbox.');
        return;
      }

      const formData = {
        teamNumber: document.getElementById("teamNumber").value,
        teamName: document.getElementById("teamName").value,
        driveType: {
          Sweve: document.getElementById("Sweve").checked,
          Tank: document.getElementById("Tank").checked,
          Mecanum: document.getElementById("Mecanum").checked
        },
        auton: {
          yes: document.getElementById("DYRLIAY").checked,
          no: document.getElementById("DYRLIAN").checked
        },
        autonPlan: document.getElementById("Whats_your_Auton_plan").value,
        scoringMethod: {
          Algee: document.getElementById("Algee").checked,
          Coral: document.getElementById("Coral").checked
        },
        highestCoralLevel: {
          L1: document.getElementById("L1").checked,
          L2: document.getElementById("L2").checked,
          L3: document.getElementById("L3").checked,
          L4: document.getElementById("L4").checked
        },
        pickupMethod: {
          Ground: document.getElementById("Ground").checked,
          PS: document.getElementById("PS").checked,
          BT: document.getElementById("BT").checked
        },
        preferredCoralLevel: {
          PL1: document.getElementById("PL1").checked,
          PL2: document.getElementById("PL2").checked,
          PL3: document.getElementById("PL3").checked,
          PL4: document.getElementById("PL4").checked
        },
        shootProcessAlgee: {
          Both: document.getElementById("Both").checked,
          Shoot: document.getElementById("Shoot").checked,
          Process: document.getElementById("Process").checked
        },
        comments: document.getElementById("Comments").value
      };

      const formDataString = JSON.stringify(formData);

      const qrCodeContainer = document.getElementById("qrcode");
      qrCodeContainer.innerHTML = ""; 

      const qr = new QRCode(qrCodeContainer, {
        text: formDataString,
        width: 256,  
        height: 256, 
        correctLevel: QRCode.CorrectLevel.L, 
        version: 8  
      });
      
      document.getElementById("qrData").value = formDataString;
    }

    function copyToClipboard() {
      const qrData = document.getElementById("qrData");
      qrData.select();
      qrData.setSelectionRange(0, 99999); // For mobile devices
      document.execCommand("copy");
      alert("QR code data copied to clipboard!");
    }
  </script>
</head>
<body>
  <h1>MP Reefscape Pit Scouting</h1>

  <form id="MP Pit Scouting" onsubmit="generateQRCode(event)"> <!-- onsubmit change -->
    <label for="teamNumber">Team Number:</label>
    <input type="number" id="teamNumber" name="teamNumber"><br><br>

    <label for="teamName">Robot Name:</label>
    <input type="text" id="teamName" name="teamName"><br><br>

    <label for="Drive Type?">Drive Type?:</label>
    <input type="checkbox" id="Sweve" name="Sweve" value="Sweve">Sweve
    <input type="checkbox" id="Tank" name="Tank" value="Tank">Tank
    <input type="checkbox" id="Mecanum" name="Mecanum" value="Mecanum">Mecanum<br><br>

    <label for="Does your robot leave in Auton?">Does your Robot leave in Auton?</label>
    <input type="checkbox" id="DYRLIAY" name="DYRLIAY" value="DYRLIAY">Yes
    <input type="checkbox" id="DYRLIAN" name="DYRLIAN" value="DYRLIAN">No<br><br>

    <label for="Whats your Auton plan?">Whats your Auton plan?</label>
    <input type="text" id="Whats_your_Auton_plan" name="Whats_your_Auton_plan"><br><br>

    <label for="Your preferred way to score with?:">Your preferred way to score with?:</label>
    <input type="checkbox" id="Algee" name="Algee" value="Algee">Algee
    <input type="checkbox" id="Coral" name="Coral" value="Coral">Coral<br><br>

    <label for="Whats the highest level of Coral can your robot reach?">Whats the highest level of Coral can your robot reach?</label>
    <input type="checkbox" id="L1" name="L1" value="L1">Level 1
    <input type="checkbox" id="L2" name="L2" value="L2">Level 2
    <input type="checkbox" id="L3" name="L3" value="L3">Level 3
    <input type="checkbox" id="L4" name="L4" value="L4">Level 4
    <input type="checkbox" id="HN/A" name="HN/A" value="HN/A">N/A<br><br>

    <label for="How does your Robot pick up Algee?">How does your Robot pick up Algee?</label>
    <input type="checkbox" id="Ground" name="Ground" value="Ground">Ground
    <input type="checkbox" id="PS" name="PS" value="PS">Player Station
    <input type="checkbox" id="BT" name="BT" value="BT">Both
    <input type="checkbox" id="AN/A" name="AN/A" value="AN/A">N/A<br><br>

    <label for="Whats the preferred level of Coral your robot can reach?">Whats the preferred level of Coral your robot can reach?</label>
    <input type="checkbox" id="PL1" name="PL1" value="PL1">Level 1
    <input type="checkbox" id="PL2" name="PL2" value="PL2">Level 2
    <input type="checkbox" id="PL3" name="PL3" value="PL3">Level 3
    <input type="checkbox" id="PL4" name="PL4" value="PL4">Level 4
    <input type="checkbox" id="PN/A" name="PN/A" value="PN/A">N/A<br><br>

    <label for="Can your robot shoot and/or process Algee?">Can your Robot shoot and/or process Algee?</label>
    <input type="checkbox" id="Both" name="Both" value="Both">Both
    <input type="checkbox" id="Shoot" name="Shoot" value="Shoot">Shoot
    <input type="checkbox" id="Process" name="Process" value="Process">Process
    <input type="checkbox" id="SPN/A" name="SPN/A" value="SPN/A">N/A<br><br>

    <label for="Comments">Comments:</label>
    <input type="text" id="Comments" name="Comments"><br><br>

    <button type="submit">Generate QR Code</button>
  </form>

  <div id="qrcode"></div>

  <input type="text" id="qrData" style="opacity: 0; position: absolute;" readonly>

  <button onclick="copyToClipboard()">Copy QR Code Data</button>
</body>
</html>
